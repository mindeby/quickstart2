<script>
  document.addEventListener('DOMContentLoaded', () => { //wait until everything loaded

    let nav = document.getElementById('nav');

    hamburger.addEventListener("click", function(e){
      dropdown.classList.add('expanded');
        nav.style.height ="340px";
        nav.classList.add('border');
    });


    document.addEventListener("click", function(e){
      if(e.target !== hamburger ){
        dropdown.classList.remove('expanded');
        nav.style.height ="115px";
      }
    });


    let buttons_array = document.getElementsByClassName("booking");



    if (sessionStorage.getItem('message')){
            document.getElementById("message").innerText = sessionStorage.getItem("message");
            sessionStorage.clear();
    }


    for (let i = 0; i< buttons_array.length; i += 1) {
       document.getElementsByClassName("booking")[i].setAttribute("id", i);

       let reservation = document.getElementById(i);
       let activity = reservation.children[0].innerText;
       let date = reservation.children[1].innerText;
       let time = reservation.children[2].innerText;
       let place = reservation.children[3].innerText;
       let button = reservation.children[4].children[0].children[0];


       button.addEventListener("click", function(e) {
         if ({{.Site.LanguagePrefix}} == "/en") {
           let reservation_text = "I want to join the " + activity + " on the " + date + " in " + time + " in " + place;
           sessionStorage.setItem("message", reservation_text)
         } else {
           let reservation_text = "Quero participar na atividade " + activity + " no dia " + date + " Ã s " + time + " em " + place;
           sessionStorage.setItem("message", reservation_text)
         }
       });

    }





  });

</script>




<script>


  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", user => {
      if (!user) {
        window.netlifyIdentity.on("login", () => {
          document.location.href = "/admin/";
        });
      }
    });
  }
</script>
